<!doctype html> <html lang=en > <link rel=alternate  type="application/rss+xml" href="/feed.xml" /> <link rel=stylesheet  href="https://cdn.jsdelivr.net/npm/glightbox/dist/css/glightbox.min.css" /> <script src="https://cdn.jsdelivr.net/gh/mcstudios/glightbox/dist/js/glightbox.min.js"></script> <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/libs/highlight/styles/rose-pine-moon.min.css"> <link rel=stylesheet  href="/css/franklin.css"> <link rel=stylesheet  href="/css/tufte.css"> <link rel=stylesheet  href="/css/latex.css"> <link rel=stylesheet  href="/css/adjust.css"> <link rel=icon  href="/assets/favicon.png"> <title>Paredit and Evil: Improving Navigation</title> <div id=layout > <div id=menu > <ul> <li><a href="/">Home</a> <li><a href="/about/">About</a> <li><a href="/posts/">Posts</a> <li><a href="/notebooks/">Notebooks</a> <li><a href="/docs/">Docs</a> </ul> </div> <div id=main > <div class=franklin-content ><h1 id=paredit_and_evil_improving_navigation ><a href="#paredit_and_evil_improving_navigation" class=header-anchor >Paredit and Evil: Improving Navigation</a></h1> <p>2025-11-30</p> <h2 id=if ><a href="#if" class=header-anchor >If...</a></h2> <ul> <li><p>...you are an <a href="https://www.gnu.org/software/emacs/">Emacs</a> user</p> <li><p>who also uses <a href="https://github.com/noctuid/evil-guide">evil</a> </p> <li><p>and is having a hard time getting <a href="https://paredit.org/">paredit</a> navigation to work,</p> <li><p><em><strong>this post is for you</strong></em>.</p> </ul> <h2 id=the_most_important_setting ><a href="#the_most_important_setting" class=header-anchor >The Most Important Setting</a></h2> <p>First make sure <code>evil-move-beyond-eol</code> is true.</p> <pre><code class="lisp hljs"><span class=hljs-comment >;; Many paredit navigation commands won&#x27;t work without this!</span>
(<span class=hljs-name >setq</span> evil-move-beyond-eol <span class=hljs-literal >t</span>)</code></pre> <p>Unfortunately, it is a departure from traditional vi/vim behavior that some of you may not like. To limit this behavior to only when you&#39;re using paredit-mode, you could do something like this.</p> <pre><code class="lisp hljs">(<span class=hljs-name >defun</span> enable-evil-move-beyond-eol ()
  <span class=hljs-string >&quot;Enable `evil-move-beyond-eol&#x27; in a buffer-local way.&quot;</span>
  (<span class=hljs-name >setq-local</span> evil-move-beyond-eol <span class=hljs-literal >t</span>))
  
<span class=hljs-comment >;; My preference is to used named functions in hooks,</span>
<span class=hljs-comment >;; because it makes removal easier.</span>
(<span class=hljs-name >add-hook</span> &#x27;paredit-mode-hook #&#x27;enable-evil-move-beyond-eol)</code></pre> <p>I personally don&#39;t mind and do it the first way, but you have options.</p> <h2 id=improving_navigation_keybindings ><a href="#improving_navigation_keybindings" class=header-anchor >Improving Navigation Keybindings</a></h2> <p>Paredit provides the following navigation commands.</p> <table><tr><th align=right >command<th align=right >key<th align=right >key<th align=right >command<tr><td align=right >paredit-forward<td align=right >C-M-f<td align=right >C-M-b<td align=right >paredit-backward<tr><td align=right >paredit-forward-up<td align=right >C-M-n<td align=right >C-M-p<td align=right >paredit-backward-down<tr><td align=right >paredit-forward-down<td align=right >C-M-d<td align=right >C-M-u<td align=right >paredit-backward-up</table> <p>There are two dimensions of movement here:</p> <ul> <li><p>forward and backward and </p> <li><p>up and down.</p> </ul> <p>For the commands that move in two dimensions, the mnemonics used by the existing keybindings struggle to capture both dimensions at once. However, vi-style editing has a long tradtion of using <code>&#40;&#91;&#123;&#125;&#93;&#41;</code> for forward and backward movement, so forward and backward directionality is already solved. The only thing left to solve is encoding up and down.</p> <ul> <li><p><code>&#91;&#93;</code> will be used for downard movement, because I think it&#39;s more common to move down into a sexp.</p> <li><p><code>&#123;&#125;</code> will be used for upward movement. This requires the SHIFT key.</p> </ul> <table><tr><th align=right >command<th align=right >key<th align=right >key<th align=right >command<tr><td align=right >paredit-forward<td align=right >&#40;<td align=right >&#41;<td align=right >paredit-backward<tr><td align=right >paredit-forward-up<td align=right >&#91;<td align=right >&#93;<td align=right >paredit-backward-down<tr><td align=right >paredit-forward-down<td align=right >&#123;<td align=right >&#125;<td align=right >paredit-backward-up</table> <span class=marginnote > <a href="https://github.com/meow-edit/meow">Meow</a> users could try something similar and gain similar benefits. </span> <pre><code class="lisp hljs"><span class=hljs-comment >;; Integrate paredit navigation commands in a vi style.</span>
(<span class=hljs-name >evil-define-key</span> &#x27;(normal visual) paredit-mode-map
  <span class=hljs-comment >;;  paredit function                    overriden evil function</span>
  <span class=hljs-comment >;;  ----------------                    -----------------------</span>
  <span class=hljs-string >&quot;)&quot;</span> #&#x27;paredit-forward                 <span class=hljs-comment >; evil-forward-sentence-begin</span>
  <span class=hljs-string >&quot;(&quot;</span> #&#x27;paredit-backward                <span class=hljs-comment >; evil-backward-sentence-begin</span>
  <span class=hljs-string >&quot;]&quot;</span> #&#x27;paredit-forward-down            <span class=hljs-comment >; evil-forward-section-begin</span>
  <span class=hljs-string >&quot;[&quot;</span> #&#x27;paredit-backward-down           <span class=hljs-comment >; evil-backward-section-begin</span>
  <span class=hljs-string >&quot;}&quot;</span> #&#x27;paredit-forward-up              <span class=hljs-comment >; evil-forward-paragraph</span>
  <span class=hljs-string >&quot;{&quot;</span> #&#x27;paredit-backward-up             <span class=hljs-comment >; evil-backward-paragraph</span>
  )</code></pre> <p>The trade-off is that some traditional evil movement commands had to be unbound, but I think it&#39;s a sacrifice worth making in a Lisp editing context. After all, you&#39;re working with &#40;sexps&#41; not sentences and paragraphs.</p> <p>I would like evil users to try this out, and see how it feels. I think you&#39;ll find it very intuitive and compatible with vi-style movement. It should make lisp programming a little more enjoyable too.</p> <p>Happy Lisp Hacking</p> <div class=page-foot > <a href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> <a href="https://github.com/g-gundam">@g-gundam</a>. Last modified: November 30, 2025. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>. </div> </div> </div> </div> <script src="/libs/highlight/highlight.min.js"></script> <script>hljs.highlightAll();hljs.configure({tabReplace: ' '});</script> <script> document.addEventListener('DOMContentLoaded', () => { const lightbox = GLightbox({ selector: ".franklin-content img"}) }) </script>